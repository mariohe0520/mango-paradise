# CHANGELOG

## v2.1.0 — 2026-02-18 · 芒果世界主题 & 模块融合

### Bug修复
- **修复iOS状态栏遮挡**：增加 `.menu-content`、`.screen-header`、`.game-header` 的 `padding-top`，使用 `calc(env(safe-area-inset-top, 20px) + 1rem)` 确保在iPhone Safari中不被状态栏遮挡

### 去WoW化 — 全面替换为芒果世界原创主题
- **章节重命名**：
  - 艾尔文森林 → 芒果林
  - 西部荒野 → 阳光沙滩
  - 暴风城 → 芒果城
  - 诅咒之地 → 迷雾沼泽
  - 燃烧平原 → 火山岛
  - 诺森德 → 冰霜雪原
- **Boss重命名**：
  - 暴风巨龙 → 风暴巨龙
  - 巫妖王 → 冰霜君主
  - 虚空行者 → 水晶守卫
  - 萨格拉斯 → 深渊之王
- **故事文本**：100关全部剧情文本替换为芒果世界原创故事，去除所有萨尔、奥格瑞玛、部落、洛克塔尔等WoW引用
- **加载提示**：去除所有WoW角色语录，替换为芒果庄园精灵语录
- **庄园装饰**：部落战旗→庄园旗帜、萨满图腾→守护图腾、萨尔雕像→芒果之神像、部落风车→热带风车、狼骑兵营→芒果树屋、战鼓→丰收之鼓、奥格瑞玛之门→芒果天堂之门
- **图鉴文本**：去除德拉诺、艾露恩、铁炉堡等WoW背景，替换为原创芒果世界背景
- **Boss战利品**：所有Boss击败lore文本替换为芒果世界叙事
- **赛季名**：部落赛季→守护赛季

### 三模块融合增强
- **故事×庄园**：关卡开始时，根据已种植的树木随机显示"XX树给了你力量"的融合文字
- **Boss×庄园**：Boss战前根据庄园幸福度显示不同等级的鼓励文字（繁荣/成长/初始）
- **通关×庄园**：25%概率在2星以上通关时获得庄园奖励（幸福度+10~25、额外金币50~100）
- **主菜单×庄园**：庄园按钮显示当前buff摘要（幸福度、激活的buff简称）

### 涉及文件
- `css/style.css` — safe-area padding
- `js/story.js` — 全部100关剧情
- `js/levels.js` — 10个章节名称
- `js/main.js` — 加载提示
- `js/estate.js` — 装饰名称
- `js/collection.js` — 图鉴背景文字
- `js/boss.js` — Boss名称、描述、台词、战利品
- `js/daily.js` — 赛季名称
- `js/ui.js` — 模块融合逻辑（故事/庄园互动、通关奖励、buff摘要）
