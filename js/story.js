/* ==========================================
   芒果庄园 - 关卡叙事系统 (P1-2)
   Level Narrative: JSON-driven story text
   ========================================== */

const StoryData = {
    // Story for each level: { pre, post, bossIntro?, bossOutro? }
    levels: {
        // === Chapter 1: 芒果林 ===
        1:  { pre: '欢迎来到芒果林！勇敢的守护者，芒果庄园需要你的力量。传说只有拥有金色之心的人才能唤醒芒果树的力量。出发吧！', post: '初战告捷！芒果的力量在你手中觉醒...' },
        2:  { pre: '蛙人们在森林深处聚集，似乎在密谋什么...', post: '蛙人退散了，但这只是开始' },
        3:  { pre: '两个家族在争夺芒果资源！', post: '和平暂时恢复，两族达成了协议' },
        4:  { pre: '一股奇异的能量在宝石中涌动...', post: '你学会了驾驭特殊宝石的力量！' },
        5:  { pre: '森林深处传来不祥的低吟...', post: '阴影被驱散，阳光重新洒满林间' },
        6:  { pre: '连锁的力量在空气中激荡！', post: '你掌握了连击的奥秘，威力倍增！' },
        7:  { pre: '智者在林中设下了重重考验', post: '智者长老对你的实力表示认可' },
        8:  { pre: '守卫队收到了紧急求援信号！', post: '援军已到，危机暂时解除' },
        9:  { pre: '森林的核心区域闪烁着异样的光芒', post: '特殊宝石的奥秘已完全掌握！' },
        10: {
            pre: '树精长老挡住了通往下一片大陆的路！',
            bossIntro: ['古老的大树缓缓睁开了眼睛...', '「年轻的守护者，证明你的资格！」', '树精长老发动了进攻！'],
            post: '树精长老倒下了！通往沙滩的路已经打开！',
            bossOutro: ['「...不错，你有保护芒果庄园的资质」', '树精化为光点融入了你的身体', '获得了森林的祝福！']
        },
        // === Chapter 2: 阳光沙滩 ===
        11: { pre: '踏入阳光沙滩，金色沙粒在脚下闪耀...', post: '工匠加入了队伍！' },
        12: { pre: '沙暴中隐约可见宝石的光芒', post: '暴风过后，宝石闪耀得更加璀璨' },
        13: { pre: '两支探险队在沙滩上对峙', post: '冲突化解，双方共同抵御外敌' },
        14: { pre: '海风中蕴含着连击的节奏', post: '风的力量助你创造了惊人连击！' },
        15: { pre: '地形变得更加复杂了...', post: '即使地形改变，你依然势不可挡' },
        16: { pre: '地下洞穴传来轰隆的爆炸声', post: '炸弹宝石的力量已经掌握！' },
        17: { pre: '守卫队在沙滩建立了前哨基地', post: '基地建设完成，补给线已通' },
        18: { pre: '探险家发现了古老的芒果矿脉！', post: '矿脉开采成功，收获满满' },
        19: { pre: '沙滩深处的遗迹开始活动...', post: '遗迹的力量被封印在宝石中' },
        20: {
            pre: '沙漠蝎王从地底钻出！',
            bossIntro: ['大地开始震颤...', '一只巨大的蝎子从沙丘中破土而出！', '「这片沙滩是我的领地！」'],
            post: '蝎王被击败！阳光沙滩恢复了平静！',
            bossOutro: ['蝎王化为琥珀，留下了珍贵的芒果石', '沙滩居民纷纷前来感谢', '前往芒果城的道路已经畅通！']
        },
        // === Chapter 3: 芒果城 ===
        21: { pre: '芒果城的大门在你面前缓缓打开', post: '暗影生物的威胁已显露端倪' },
        22: { pre: '城市的地下涌动着暗流', post: '暗流被阻断，城市恢复安宁' },
        23: { pre: '工匠带来了炸弹宝石的新用法', post: '爆破技术又上了一个台阶！' },
        24: { pre: '竞技场中传来阵阵欢呼', post: '你成为了竞技场的新晋冠军！' },
        25: { pre: '魔法塔发出了危险的信号', post: '魔法塔恢复了正常运转' },
        26: { pre: '王宫的宝库被神秘力量入侵', post: '宝库中的特殊宝石闪耀着新的光芒' },
        27: { pre: '连击的力量震撼了整座城市', post: '你的名声传遍了芒果城！' },
        28: { pre: '守卫队倾巢出动迎接新的威胁', post: '守卫队的荣耀在战斗中更加闪耀' },
        29: { pre: '芒果城外的黑暗越来越浓...',  post: '黑暗被暂时压制，但更大的危机在等待' },
        30: {
            pre: '风暴巨龙在城市上空盘旋！',
            bossIntro: ['天空暗了下来...', '一条巨龙从云层中俯冲而下！', '「渺小的人类，颤抖吧！」'],
            post: '巨龙被击退！芒果城保住了！',
            bossOutro: ['巨龙的鳞片散落一地', '城中百姓欢呼雀跃', '但黑暗的源头还在更远的地方...']
        },
        // === Chapter 4: 迷雾沼泽 ===
        31: { pre: '踏入迷雾沼泽，芒果精灵现身了！', post: '芒果精灵加入了你的阵营！' },
        32: { pre: '沼泽的迷雾让视野变得模糊', post: '迷雾被芒果的光芒驱散' },
        33: { pre: '地形扭曲，空间似乎被拉伸了', post: '你适应了扭曲的战场' },
        34: { pre: '暗影大军在黑暗中列阵', post: '暗影被消灭，但更强的敌人还在后方' },
        35: { pre: '沼泽的诅咒让连击变得困难', post: '你打破了诅咒的封印！' },
        36: { pre: '黑暗祭坛散发着邪恶的气息', post: '祭坛被摧毁，特殊宝石获得了净化' },
        37: { pre: '智者和芒果精灵联手对抗黑暗', post: '联合的力量击退了黑暗生物' },
        38: { pre: '彩虹的光芒在黑暗中分外耀眼', post: '彩虹宝石的力量达到了新的高度！' },
        39: { pre: '迷雾沼泽的核心区域就在前方', post: '你已经做好了面对暗影领主的准备' },
        40: {
            pre: '暗影领主从黑暗中现身！',
            bossIntro: ['空气变得冰冷...', '一个巨大的暗影从裂缝中涌出', '「你们的光明，在我面前不过是萤火之光！」'],
            post: '暗影领主被封印！迷雾沼泽开始恢复！',
            bossOutro: ['暗影消散，大地开始生长芒果树', '你获得了暗影的残余力量', '前方的火山岛在召唤你...']
        },
        // === Chapter 5: 火山岛 ===
        41: { pre: '巨龙的领地，空气中弥漫着硫磺味', post: '第一条巨龙被驯服了！' },
        42: { pre: '岩浆河挡住了去路', post: '你找到了跨越岩浆的方法' },
        43: { pre: '工匠和龙骑士在此鏖战', post: '联军取得了阶段性胜利' },
        44: { pre: '火山口的宝石蕴含着狂暴的力量', post: '你学会了控制爆炸链式反应！' },
        45: { pre: '火山岛的心脏地带更加凶险', post: '特殊宝石在高温下变得更强大' },
        46: { pre: '暗影军和龙族在火山口激战', post: '两败俱伤后，你收获了战利品' },
        47: { pre: '彩虹的力量能否对抗烈焰？', post: '彩虹与烈焰融合，产生了新的力量！' },
        48: { pre: '芒果在火焰中竟然更加香甜...', post: '火烤芒果居然是极品美味！' },
        49: { pre: '熔火之王的巢穴就在眼前', post: '最后一道防线已被突破' },
        50: {
            pre: '熔火之王从岩浆中升起！',
            bossIntro: ['地面开裂，岩浆喷涌！', '一个由烈焰构成的巨人站了起来', '「万物终将化为灰烬！」'],
            post: '熔火之王被扑灭！火山岛冷却了！',
            bossOutro: ['烈焰化为温暖的光芒', '凤凰从灰烬中重生', '极寒之地的寒风已经吹到了你的脸上...']
        },
        // === Chapter 6: 冰霜雪原 ===
        51: { pre: '极寒之地，凤凰是唯一的温暖', post: '凤凰的火焰在冰雪中格外耀眼' },
        52: { pre: '冰封的战场让移动变得艰难', post: '你找到了在冰面上战斗的诀窍' },
        53: { pre: '芒果和凤凰的力量在这里尤为关键', post: '双重力量打破了冰封的诅咒' },
        54: { pre: '连击的热量能融化万年寒冰', post: '你的连击已经炉火纯青！' },
        55: { pre: '冰霜堡垒的外围防线', post: '防线被突破，但更冷的寒意袭来' },
        56: { pre: '龙族和凤凰在冰原上空交战', post: '两大势力的碰撞创造了奇迹' },
        57: { pre: '彩虹在冰晶的折射下更加绚丽', post: '冰晶彩虹成为了你最强的武器' },
        58: { pre: '冰霜君主的影响力越来越强...', post: '你感受到了冰霜君主的存在' },
        59: { pre: '凤凰涅槃，最后的准备', post: '所有的力量已经汇聚' },
        60: {
            pre: '冰霜君主在冰晶王座上等待着你！',
            bossIntro: ['寒风刺骨，万物冰封...', '一个身穿寒冰铠甲的身影坐在王座上', '「芒果的守护者...你来了」', '「但你的旅程...到此为止！」'],
            post: '冰霜君主被击败！雪原的冰雪开始融化！',
            bossOutro: ['冰晶王座崩塌，阳光重新照耀大地', '芒果树在曾经的冻土上生根发芽', '但新的冒险...才刚刚开始！']
        },
        // === Chapter 7: 翡翠森林 ===
        61: { pre: '穿过古老的传送门，翡翠森林展现在眼前', post: '森林中的宝石拥有双倍的灵性' },
        62: { pre: '森林生物在花丛中嬉戏', post: '你与翡翠森林建立了初步的联结' },
        63: { pre: '噩梦的触须开始侵蚀森林', post: '部分噩梦被清除，但根源还在' },
        64: { pre: '守林人正在维护森林的平衡', post: '平衡暂时恢复，但很脆弱' },
        65: { pre: '森林深处的宝石闪烁着翠绿光芒', post: '翡翠之力注入了你的宝石' },
        66: { pre: '噩梦领主派出了先锋部队', post: '先锋部队被击退！' },
        67: { pre: '世界之树的根系在这里交汇', post: '你获得了世界之树的认可' },
        68: { pre: '梦境与现实的边界变得模糊', post: '你学会了在两个世界间穿梭' },
        69: { pre: '翡翠巨龙的气息越来越近', post: '决战在即，做好准备！' },
        70: {
            pre: '翡翠巨龙在森林中心守望！',
            bossIntro: ['翠绿的龙息弥漫整个空间...', '「守护者，这是森林最后的考验」', '「只有战胜我，你才能掌控翡翠之力！」'],
            post: '翡翠巨龙认可了你的实力！',
            bossOutro: ['巨龙化为一颗翡翠宝石', '森林恢复了安宁', '新的次元裂缝出现了...']
        },
        // === Chapter 8: 水晶洞穴 ===
        71: { pre: '次元裂缝将你带入了水晶洞穴', post: '在混沌中找到了前进的方向' },
        72: { pre: '水晶能量扭曲了一切', post: '你开始适应水晶洞穴的法则' },
        73: { pre: '洞穴生物从裂缝中不断涌出', post: '裂缝被暂时封印' },
        74: { pre: '时间在这里变得毫无意义', post: '你学会了操控洞穴中的时间' },
        75: { pre: '水晶的核心闪烁着不祥的光芒', post: '核心的一层封印被解除' },
        76: { pre: '水晶守卫的仆从拦住了去路', post: '仆从被击败，主人就在前方' },
        77: { pre: '水晶与现实的碰撞创造了特殊宝石', post: '水晶宝石的力量不可思议！' },
        78: { pre: '空间折叠让棋盘变得诡异', post: '你驾驭了折叠空间的力量' },
        79: { pre: '水晶守卫就在前方等待', post: '最终之战近在咫尺' },
        80: {
            pre: '水晶守卫出现了！',
            bossIntro: ['空间开始坍缩...', '一个由水晶能量构成的存在浮现', '「你不属于这里...回去！」'],
            post: '水晶守卫被击败！空间恢复稳定！',
            bossOutro: ['水晶能量凝聚成了强大的宝石', '一道时光之门在废墟中显现', '古老的力量在门后召唤着你...']
        },
        // === Chapter 9: 星空之境 ===
        81: { pre: '时光之门将你带到了远古时代', post: '过去的宝石和现在一样闪耀' },
        82: { pre: '时间线开始出现紊乱', post: '第一条时间线被修复' },
        83: { pre: '来自未来的警告正在消失', post: '你保存了关键的时间信息' },
        84: { pre: '不同时代的宝石在这里汇聚', post: '时空宝石的力量令人震撼' },
        85: { pre: '时光之龙的试炼开始了', post: '第一阶段试炼通过！' },
        86: { pre: '过去的英雄们向你发起挑战', post: '英雄们认可了你的实力' },
        87: { pre: '时间悖论让一切变得混乱', post: '你解开了时间的谜题' },
        88: { pre: '星空之境的最深处', post: '永恒的光芒照亮了黑暗' },
        89: { pre: '时光之龙在时间的尽头等待', post: '终极试炼即将开始' },
        90: {
            pre: '时光之龙从时间洪流中现身！',
            bossIntro: ['时间停止了流动...', '一条闪耀着金色光芒的龙从虚无中走来', '「我已等候你千年...」', '「让我看看你是否配得上命运的眷顾！」'],
            post: '时光之龙被说服！你获得了时间的力量！',
            bossOutro: ['时间重新流动', '你获得了预知未来的一瞬间', '最终的战场——深渊堡垒！']
        },
        // === Chapter 10: 芒果天堂 ===
        91:  { pre: '深渊堡垒矗立在眼前', post: '第一道防线被突破！' },
        92:  { pre: '暗影大军排山倒海而来', post: '暗影先锋被击退' },
        93:  { pre: '黑暗的法术扭曲了宝石的力量', post: '你将扭曲的力量化为己用' },
        94:  { pre: '暗影领主们开始注意到你了', post: '你的名字在深渊中传开了' },
        95:  { pre: '堡垒内部比想象中更加危险', post: '你已经深入敌人的腹地' },
        96:  { pre: '黑暗的核心能量在此汇聚', post: '核心能量被你截获！' },
        97:  { pre: '深渊之王的精英守卫出动了', post: '精英守卫全部击败！' },
        98:  { pre: '通往王座的最后走廊', post: '所有的伙伴都在为你加油' },
        99:  { pre: '芒果庄园的所有力量在此汇聚', post: '你感受到了所有守护者的力量' },
        100: {
            pre: '深渊之王在黑暗的王座上等待最终决战！',
            bossIntro: ['大地在颤抖，天空在燃烧...', '一个比山岳还巨大的身影从火焰中站起', '「渺小的芒果守护者...」', '「你以为凭区区消消乐就能打败我？」', '「让我来终结这场游戏！」'],
            post: '深渊之王被彻底击败！世界恢复了和平！',
            bossOutro: ['黑暗的王座崩塌...', '天空重新变得湛蓝', '芒果树在曾经的战场上盛开', '你是真正的芒果守护者！', '芒 THE END...? 芒']
        }
    },

    getLevel(levelId) {
        return this.levels[levelId] || null;
    },

    hasStory(levelId) {
        return !!this.levels[levelId];
    },

    isBossStory(levelId) {
        const story = this.levels[levelId];
        return story && story.bossIntro;
    }
};
